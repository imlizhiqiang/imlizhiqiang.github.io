---
title: 什么是对象
description: 对于对象本质的正确认识，是理解动态类型、原型、高阶函数、闭包等概念的前提。
---

## 什么是值？

我们观察这样一个语句`x=5`，这里等号的左边是变量名，等号的右边就是值。

简而言之，值就是**一切可以出现在等号右边的东西**，或者说，它是**一切可以被指向的东西**。同时，它也可以传递，可以作为函数的参数或者返回值。

### 值与对象

所谓的对象，是一个值，其特殊的地方在于，它是**由多于一个的值构成的一堆值，并将它们打包起来看做是一个整体的值**，这个打包动作就是封装，对比高阶函数（能接收或返回函数的函数），对象可以被看为是“高阶值”（封装值的值）。

对象是值，所以对象具备值的特征，即可以出现在等号的右边，可以传递，可以作为函数的参数或者返回值。

## 一切皆对象

所谓一切皆对象，是指编程语言中支持这样一种“提升”：**任意的值都可以被强制视作对象**，也就是“高阶值”。

这里为什么说是“提升”？因为一个高阶的事物可以自然地被视为低阶的事物，只要无视其内部的复杂性，将其作为一个整体看待即可，但一个低阶的事物不能自然被认为是高阶的，因为它自己不具备复杂性。对象可以被视为值，这很好理解，但值可以被视为对象，这就需要语言的强制。如果没有这个强制，简单的值是不能自然地被认为是一个对象的。

语言出于一致性的考虑，要支持一切皆对象，那么必须支持“一个简单的值也是对象”这样的逻辑。

既然是对象，就可以在内部包含多个值，这就导致必须支持在原值上“附加”更多的值，将原值与附加值共同封装为对象。以 java 的 int 为例，一个简单的整数，它自身不具备任何的属性或者方法，怎么把它视为对象呢？方法就是在它上面“附加”一些额外的东西，并封装在一起。考虑 int 和 Integer 的区别就可以发现，Integer 其实就是在 int 的基础上添加了一些属性和方法，但使用起来感觉上跟 int 是一致的。

这个封装动作要注意，绝不会影响到原值本身，包括它的类型、属性或行为，跟往容器里追加元素是不同的（改变了原值），跟往实例中追加属性也是不同的（改变了原有属性）。尤其是向实例中追加属性这个动作非常具有迷惑性，从表面看来是一模一样的，但本质上完全不同。理解这一点是理解 JavaScript 原型的基础。

## 函数是不是对象？

上面我们已经知道，对象是值，那么也就是说，**“一切皆对象”等同于“一切皆值”**。一个编程语言如果声称自己“一切皆对象”，那么它必须同时承认“一切皆值”，这就是说语言中的一切元素都可以出现在`=`的右边。

尤其在函数上能清楚地观察到这一点，在 js 和 python 中，函数被视为一种值，所以更进一步，函数也可以被视为对象。

那么我们又知道，要想一切皆对象，必须得承认函数是一种值。所以反过来说，只要在一门语言中，函数不是一种值，那就说明，这门语言不是一切皆对象。

对比 java 就能看出不同，java 不承认函数是值，即使是 java8 也是，函数仍然被封装在 class 中。java 对函数式的支持只是语法糖级别的，并不是语言级别的。

> 通过上面的讨论我们可以知道，java 不是“一切皆对象”的，非常明显的特征有两个：
>
> 一个是 java 中有所谓的“基本类型”或者“原始类型”，比如 int，这种类型的变量是一个简单的值，并且无论如何，你都做不到在一个 int 的值上附加另外的值。所以 java 后来才有了包装类型 Integer。这就是说，int 不能被视为高阶值。
>
> 另外一个是 java 中，函数不可能出现在等号的右边，在写 java 代码的时候，无论如何你也做不到在`=`的右边写一个函数。java 不承认函数是一种值，也就不承认函数是一种对象。所以 java 有了 method 类。但 method 类及其实例并不等同于函数本身。
>
> 无论是 Integer，还是 method，亦或是 java8 的语法糖，这都是 java 对于自己不完全面向对象的一种补丁而已。java 的本质仍然不是“一切皆对象”的。

## 高阶函数与闭包

当函数可以被视为是值，也就是可以出现在等号的右边的时候，我们就得到了一些有趣的必然结果。

既然函数是值，那么它自然就可以：

-   被强制提升为对象，从而可以有附加的属性和方法。
-   可以作为函数的参数和返回值。

由此，如果在一门语言中确实能“一切皆对象”，那就带来了第一个必然结果，即这门语言必然支持高阶函数。

而高阶函数也带来了第二个必然结果，即这门语言必然支持闭包。

关于高阶函数和闭包，在另一篇博客中详细讨论。这里我们只需要知道，**高阶函数与闭包是“一切皆对象”的必然结果**。

## 总结

对象的本质非常简单：对象就是**（高阶的）值，是把一堆值放在一起视为一个整体的值**。而值的特点是**可以被指向**，从形式上观察，就是**可以出现在等号的右边**。

所谓一切皆对象，是说**这门语言中所有的元素都可以被视为一个值，进而可以被强制视为一个高阶值**。哪怕是简单的标量，也必须支持给它额外添加一些属性，使其变为一个封装体，即对象。

如果一门语言是“一切皆对象”的，那么该门语言中，函数必然是值，即可以出现在等号的右边，可以传递，可以作为参数和返回值，那么也就必然支持高阶函数与闭包的特性。
